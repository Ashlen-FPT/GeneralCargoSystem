@using GeneralCargoSystem.Utility
@using Microsoft.AspNetCore.Identity
@{
    ViewData["Title"] = "Users";
}
<!-- Main content -->
<div class="content">
    <div class="container-fluid">


        @*        <div class="row">
        <div class="col-6">
        </div>
        @if (User.IsInRole(Role.Supervisor))
        {
        <div class="col-6 text-right">
        <a class="btn btn-primary" asp-area="Identity" asp-page="/Account/Register">
        <i class="fas fa-plus"></i>
        &nbsp; Create New User
        </a>
        </div>
        }
        </div>*@

        <br />
        <div class="p-4 border rounded">
            <table id="tblData" class="table table-striped table-bordered" style="width:100%">
                <thead class="thead-dark">
                    <tr class="table-info">
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Email</th>
                        <th>Phone Number</th>
                        <th>Role</th>
@*                        <th>Email Confirmed</th>*@
                    </tr>
                </thead>
            </table>
        </div>
    </div>
    <!-- /.row -->
</div><!-- /.container-fluid -->
<!-- Main content -->
<!-- /.content -->
<script type="text/javascript" src="~/lib/datatables/jquery-3.6.0.js"></script>
<link type="text/css" href="~/lib/datatables/datatables.min.css" rel="stylesheet">
<script type="text/javascript" src="~/lib/datatables/datatables.js"></script>


<script>
﻿var dataTable;

$(document).ready(function () {
    loadDataTable();
});


function loadDataTable() {
    dataTable = $('#tblData').DataTable({
        "ajax": {
            "url": "/UserManagement/User/Users"
        },
        dom: 'Bfrtip',
            buttons: [
                {
                    extend: 'pageLength',
                },
                {
                    extend: 'copy',
                    title: 'Users - General Cargo',
                    text:'<i class= "fa fa-copy"></i> Copy'
                },
                {
                    extend: 'excel',
                    title: 'Users - General Cargo',
                    text: '<i class= "fa fa-file-excel"></i> Excel'
                },
                {
                    extend: 'pdf',
                    title: 'Users - General Cargo',
                    text: '<i class= "fa fa-file-pdf"></i> PDF'
                },
                {
                    extend: 'csv',
                    title: 'Users - General Cargo',
                    text: '<i class= "fa fa-file-csv"></i> CSV'
                },
                {
                    extend: 'print',
                    title: 'Users - General Cargo',
                    text: '<i class= "fa fa-print"></i> Print'
                }
            ],

        "columns": [
            { "data": "firstName", "width": "15%" },
            { "data": "lastName", "width": "15%" },
            { "data": "email", "width": "15%" },
            { "data": "phoneNumber", "width": "15%" },
            { "data": "role", "width": "15%" },
            //{
            //    "data": {
            //        emailConfirmed: "emailConfirmed"
            //    },

            //    "render": function (data) {

            //        if (data.emailConfirmed == true) {
            //            return `
            //                <div class="text-center">
            //                    <a class="btn btn-success text-white" style="cursor:pointer" data-toggle="tooltip" data-placement="top" title="Click to Turn Off">
            //                      <i class="fas fa-check"></i>
            //                    </a>
            //                </div>
            //               `;
            //        }

            //        else {
            //            return `
            //                <div class="text-center">
            //                    <a  class="btn btn-danger text-white" style="cursor:pointer" data-toggle="tooltip" data-placement="top" title="Click to Turn On">
            //                     <i class="fas fa-times"></i>
            //                    </a>
            //                </div>
            //               `;
            //        }


            //    }, "width": "10%"

            //},
            //{
            //    "data": {
            //        id: "id", lockoutEnd: "lockoutEnd"
            //    },
            //    "render": function (data) {
            //        var today = new Date().getTime();
            //        var lockout = new Date(data.lockoutEnd).getTime();
            //        if (lockout > today) {
            //            //user is currently locked
            //            return `
            //                <div class="text-center">
            //                    <a onclick=LockUnlock('${data.id}') class="btn btn-danger text-white" style="cursor:pointer; width:100px;">
            //                        <i class="fas fa-lock-open"></i>  Unlock
            //                    </a>
            //                </div>
            //               `;
            //        }
            //        else {
            //            return `
            //                <div class="text-center">
            //                    <a onclick=LockUnlock('${data.id}') class="btn btn-success text-white" style="cursor:pointer; width:100px;">
            //                        <i class="fas fa-lock"></i>  Lock
            //                    </a>
            //                </div>
            //               `;
            //        }

            //    }, "width": "25%"
            //}
        ]
    });
}

//function LockUnlock(id) {

//    $.ajax({
//        type: "POST",
//        url: '/FruitCustomer/User/LockUnlock',
//        data: JSON.stringify(id),
//        contentType: "application/json",
//        success: function (data) {
//            if (data.success) {
//                toastr.success(data.message);
//                dataTable.ajax.reload();
//            }
//            else {
//                toastr.error(data.message);
//            }
//        }
//    });

//}

</script>
